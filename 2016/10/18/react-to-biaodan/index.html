<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> React 笔记之 表单 · 冷子欲-前端博客</title><meta name="description" content="React 笔记之 表单 - lengziyu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.lengziyu.com/atom.xml" title="冷子欲-前端博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archive</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">Tags</a></li><li class="nav-list-item"><a href="http://lengziyu.com" target="_blank" class="nav-list-link">个人网站</a></li><li class="nav-list-item"><a href="https://github.com/lengziyu" target="_blank" class="nav-list-link">GitHub</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">Rss</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">React 笔记之 表单</h1><div class="post-info">2016年10月18日<a href="/tags/react/" title="react" class="post-tag">#react</a></div><div class="post-content"><p>诸如： <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code>、<code>&lt;option&gt;</code> 这样的表单组件不同于其他组件，因为他们可以通过用户交互发生变化。这些组件提供的界面使响应用户交互的表单数据处理更加容易。<br><a id="more"></a></p>
<h2 id="交互属性"><a href="#交互属性" class="headerlink" title="交互属性"></a>交互属性</h2><p>在 HTML 中<code>&lt;textarea&gt;</code>的值通过子节点设置；在 React 中则应该使用 value 代替。<br>表单组件可以通过onChange回调函数来监听组件变化。当用户做出以下交互时,onChange执行并通过浏览器做出响应：</p>
<ul>
<li><code>&lt;input&gt;</code>或 <code>&lt;textarea&gt;</code> 的 <code>value</code> 发生变化时。</li>
<li><code>&lt;input&gt;</code>的 <code>checked</code> 状态改变时。</li>
<li><code>&lt;option&gt;</code> 的 <code>selected</code> 状态改变时。<br>和所有 DOM 事件一样，所有的 HTML 原生组件都支持 onChange 属性，而且可以用来监听冒泡的 change 事件.</li>
</ul>
<div class="tip"><br>对于<code>&lt;input&gt;</code>和<code>&lt;textarea&gt;</code>，onChange应当被用于取代DOM内置的onInput事件处理<br></div>

<h2 id="不可控组件和可控组件"><a href="#不可控组件和可控组件" class="headerlink" title="不可控组件和可控组件"></a>不可控组件和可控组件</h2><p><strong>可控组件</strong><br>设置了 <code>value</code> 的 <code>&lt;input&gt;</code> 是一个受限组件。 对于受限的 <code>&lt;input&gt;</code>，渲染出来的 HTML 元素始终保持 <code>value</code> 属性的值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"Hello!"</span>/&gt;</span>;</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>上面的代码将渲染出一个值为 Hello! 的 input 元素。用户在渲染出来的元素里输入任何值都不起作用，因为 React 已经赋值为 Hello!。如果想响应更新用户输入的值，就得使用 onChange 事件<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">getInitialState: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;<span class="keyword">value</span>: <span class="string">'Hello!'</span>&#125;;</div><div class="line"> &#125;,</div><div class="line"> handleChange: <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span> &#123;</div><div class="line">    this.setState(&#123;<span class="keyword">value</span>: event.<span class="keyword">target</span>.<span class="keyword">value</span>&#125;);</div><div class="line"> &#125;,</div><div class="line"> render: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</div><div class="line">    var <span class="keyword">value</span> = this.state.<span class="keyword">value</span>;</div><div class="line">    <span class="keyword">return</span> &lt;input <span class="keyword">type</span>=<span class="string">"text"</span> <span class="keyword">value</span>=&#123;<span class="keyword">value</span>&#125; onChange=&#123;this.handleChange&#125; /&gt;;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p><strong>Default Value</strong><br>初始值是状态中的value。如果要取数据，可直接使用 <code>var inputValue = this.state.value</code>。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">defaultValue</span>=<span class="string">&#123;this.state.value&#125;/</span>&gt;</span>;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><div class="tip"><br>一个可控组件并不保持自己的原始状态；组件的呈现完全基于属性。<br></div><br><strong>实例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Kekong = React.creatClass(&#123;</div><div class="line">    <span class="attr">getInitialState</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">dada</span>:<span class="string">'shuaige'</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">handleChange</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            <span class="attr">dada</span>:e.target.value</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submitHandler</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">        e.preventDefault();</div><div class="line">        alert(<span class="keyword">this</span>.state.dada);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submitHandler&#125;</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">&#123;this.state.dada&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>speak<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">ReactDOM.render(<span class="tag">&lt;<span class="name">Kekong</span> /&gt;</span>,document.body);</div></pre></td></tr></table></figure></p>
<p><strong>不可控组件</strong><br>没有设置value(或者设为null) 的<code>&lt;input&gt;</code>组件是一个不可控组件。这样的话，组件中的数据和state中的数据并不对应，可以说，组件的数据不可控。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span>;</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>上面的代码将渲染出一个空值的输入框，用户输入将立即反应到元素上。和受限元素一样，使用 onChange 事件可以监听值的变化。<br><strong>Default Value</strong><br>如果想给组件设置一个非空的初始值，可以使用 defaultValue 属性。 数据在这里并没有存贮在状态中，而是写在input中。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">defaultValue</span>=<span class="string">"Hello!"</span> /&gt;</span>;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果要拿到input中的value，需先拿到其DOM节点，然后获取其value值<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> inputValue = React.findDOMNode(this<span class="selector-class">.refs</span><span class="selector-class">.input</span>).value</div></pre></td></tr></table></figure></p>
<p>上面的代码渲染出来的元素和受限组件一样有一个初始值，但这个值用户可以改变并会反应到界面上。<br>同样，<code>&lt;input type=&quot;checkbox&quot;&gt;</code>和<code>&lt;input type=&quot;radio&quot;&gt;</code>支持defaultChecked属性，<code>&lt;select&gt;</code>支持设置defaultValue。<br><code>defaultValue</code>和<code>defaultChecked</code>属性只能在初始的render函数中使用，如果你要在随后的render函数中更新value值，你需要使用可控组件。</p>
<p><strong>实例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> UnKekong = React.creatClass(&#123;</div><div class="line">    <span class="attr">submitHandler</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">        e.preventDefault();</div><div class="line">        <span class="keyword">var</span> helloUnke = React.findDOMNode(<span class="keyword">this</span>.refs.helloUnke).value;</div><div class="line">        alert(helloUnke);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onsubmit</span>=<span class="string">&#123;this.submitHandler&#125;</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">"helloUnke"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">defaultValue</span>=<span class="string">"Dada shuaige"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>speak<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">React.render(<span class="tag">&lt;<span class="name">Unkekong</span> /&gt;</span>,document.body);</div></pre></td></tr></table></figure></p>
<p><strong>Checkbox和Radio的潜在问题</strong></p>
<p><div class="tip"><br>注意，在试图改变正常处理Checkbox和Radio input时，React用一个click事件来代替change事件。大多数情况下，这种行为与预期相同，除了调用preventDefault时。preventDefault从视觉上阻止浏览器更新input，即使checked被触发。它可以在移除调用preventDefault与用setTimeout来切换checked中起作用。<br></div><br><strong>Why use Controlled Components</strong><br>组件可控的优点：</p>
<ul>
<li>符合React的数据流，单向数据流，从state流向render输出的结果。</li>
<li>数据存贮在state中，便于使用。</li>
<li>便于对数据进行处理</li>
</ul>
<h2 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h2><ul>
<li><code>&lt;label htmlFor=&quot;name&quot;&gt;Name&lt;/label&gt;</code></li>
<li>要注意for是js关键字，要写成htmlFor。具体JSX语法在之间笔记中有介绍，传送门：React.js学习笔记之JSX解读。现在多数提示用input的placeholder属性替代。</li>
<li><code>&lt;input type=&quot;&quot; onChange={this.handleChange}/&gt;</code></li>
<li><code>&lt;textarea onChange={this.handleChange}/&gt;</code></li>
<li><code>&lt;select onChange={this.handleChange}&gt;&lt;option&gt;&lt;/option&gt;&lt;/select&gt;</code></li>
</ul>
<p><strong>实例</strong><br><a href="https://github.com/Xiaoxianrou/Blog/tree/master/2016.03/React-Demo/demo3" target="_blank" rel="external">这是一个demo传送门</a><br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyForm = React.createClass(&#123;</div><div class="line">getInitialState:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        username:<span class="string">''</span>,</div><div class="line">        gender:<span class="string">'man'</span>,</div><div class="line">        checked:<span class="literal">true</span></div><div class="line">    &#125;;</div><div class="line">&#125;,</div><div class="line">handleUsernameChange:<span class="function"><span class="keyword">function</span><span class="params">(e)</span></span>&#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">        username:e.target.value</div><div class="line">    &#125;);</div><div class="line">&#125;,</div><div class="line">handlerGenderChange:<span class="function"><span class="keyword">function</span><span class="params">(e)</span></span>&#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">        gender:e.target.value</div><div class="line">    &#125;);</div><div class="line">&#125;,</div><div class="line">handleCheckedChange:<span class="function"><span class="keyword">function</span><span class="params">(e)</span></span>&#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">        checked:e.target.checked</div><div class="line">    &#125;);</div><div class="line">&#125;,</div><div class="line">submitHandler:<span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>&#123;</div><div class="line">    e.preventDefault();</div><div class="line">    console.log(<span class="keyword">this</span>.state);</div><div class="line">&#125;,</div><div class="line">render:<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> &lt;form onSubmit=&#123;<span class="keyword">this</span>.submitHandler&#125;&gt;</div><div class="line">        &lt;label htmlFor=<span class="string">"username"</span>&gt;请输入用户名&lt;/label&gt;</div><div class="line">        &lt;input type=<span class="string">"text"</span> onChange=&#123;<span class="keyword">this</span>.handleUsernameChange&#125; value=&#123;<span class="keyword">this</span>.state.username&#125; id=<span class="string">"username"</span>/&gt;</div><div class="line">        &lt;br/&gt;</div><div class="line">        &lt;select onChange=&#123;<span class="keyword">this</span>.handlerGenderChange&#125; value=&#123;<span class="keyword">this</span>.state.gender&#125;&gt;</div><div class="line">            &lt;option value=<span class="string">"man"</span>&gt;男&lt;/option&gt;</div><div class="line">            &lt;option value=<span class="string">"woman"</span>&gt;女&lt;/option&gt;</div><div class="line">        &lt;/select&gt;</div><div class="line">        &lt;br/&gt;</div><div class="line">        &lt;label htmlFor=<span class="string">"checkbox"</span>&gt;大大是帅哥吗&lt;/label&gt;</div><div class="line">        &lt;input type=<span class="string">"checkbox"</span> value=<span class="string">"大大是帅哥"</span> checked=&#123;<span class="keyword">this</span>.state.checked&#125; onChange=&#123;<span class="keyword">this</span>.handleCheckedChange&#125; id=<span class="string">"checkbox"</span>/&gt;</div><div class="line">        &lt;button type=<span class="string">"submit"</span>&gt;提交&lt;/button&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line">&#125;</div><div class="line">&#125;);</div><div class="line">ReactDOM.render(&lt;MyForm /&gt;,document.getElementById(<span class="string">'reactDemo'</span>));</div></pre></td></tr></table></figure></p>
<h2 id="事件处理函数"><a href="#事件处理函数" class="headerlink" title="事件处理函数"></a>事件处理函数</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">onChange</span>=&#123;this.handleChange&#125;</div></pre></td></tr></table></figure>
<p>若有多个元素要运用事件处理函数，常规的方法是编写多个onChange事件。这么写的话会导致代码维护比较困难并且也非常冗余。更好的做法是把事件处理函数编写为一个。可以采用bind复用和name复用这两种方法。</p>
<p><strong>bind复用</strong><br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">handleChange:<span class="function"><span class="keyword">function</span><span class="params">(name,event)</span></span>&#123;</div><div class="line">    ......</div><div class="line">&#125;</div><div class="line">onChagne=&#123;<span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>,<span class="string">'input'</span>)&#125;</div></pre></td></tr></table></figure></p>
<p>书写简单，但需要对bind()机制熟悉，性能相对要好。</p>
<p><strong>实例</strong><br><a href="https://github.com/Xiaoxianrou/Blog/tree/master/2016.03/React-Demo/demo3" target="_blank" rel="external">这是一个demo传送门</a><br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyForm = React.createClass(&#123;</div><div class="line">    getInitialState:function()&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            username:<span class="string">''</span>,</div><div class="line">            gender:<span class="string">'man'</span>,</div><div class="line">            <span class="keyword">checked</span>:<span class="literal">true</span></div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    handleChange:function(name,<span class="keyword">event</span>)&#123;</div><div class="line">        <span class="keyword">var</span> newState=&#123;&#125;;</div><div class="line">        newState[name]=name==<span class="string">"checked"</span>?<span class="keyword">event</span>.target.<span class="keyword">checked</span>:<span class="keyword">event</span>.target.<span class="keyword">value</span>;</div><div class="line">        <span class="keyword">this</span>.setState(newState);</div><div class="line">    &#125;,</div><div class="line">    submitHandler:function (e) &#123;</div><div class="line">        e.preventDefault();</div><div class="line">        console.log(<span class="keyword">this</span>.state);</div><div class="line">    &#125;,</div><div class="line">    render:function () &#123;</div><div class="line">        <span class="keyword">return</span> &lt;form onSubmit=&#123;<span class="keyword">this</span>.submitHandler&#125;&gt;</div><div class="line">            &lt;label htmlFor=<span class="string">"username"</span>&gt;请输入用户名&lt;/label&gt;</div><div class="line">            &lt;input type=<span class="string">"text"</span> onChange=&#123;<span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>,<span class="string">"username"</span>)&#125; <span class="keyword">value</span>=&#123;<span class="keyword">this</span>.state.username&#125; id=<span class="string">"username"</span>/&gt;</div><div class="line">            &lt;br/&gt;</div><div class="line">            &lt;<span class="keyword">select</span> onChange=&#123;<span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>,<span class="string">"gender"</span>)&#125; <span class="keyword">value</span>=&#123;<span class="keyword">this</span>.state.gender&#125;&gt;</div><div class="line">                &lt;option <span class="keyword">value</span>=<span class="string">"man"</span>&gt;男&lt;/option&gt;</div><div class="line">                &lt;option <span class="keyword">value</span>=<span class="string">"woman"</span>&gt;女&lt;/option&gt;</div><div class="line">            &lt;/<span class="keyword">select</span>&gt;</div><div class="line">            &lt;br/&gt;</div><div class="line">            &lt;label htmlFor=<span class="string">"checkbox"</span>&gt;大大是帅哥吗&lt;/label&gt;</div><div class="line">            &lt;input type=<span class="string">"checkbox"</span> <span class="keyword">value</span>=<span class="string">"大大是帅哥"</span> <span class="keyword">checked</span>=&#123;<span class="keyword">this</span>.state.<span class="keyword">checked</span>&#125; onChange=&#123;<span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>,<span class="string">"checked"</span>)&#125; id=<span class="string">"checkbox"</span>/&gt;</div><div class="line">            &lt;button type=<span class="string">"submit"</span>&gt;提交&lt;/button&gt;</div><div class="line">        &lt;/form&gt;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">ReactDOM.render(&lt;MyForm /&gt;,document.getElementById(<span class="string">'reactDemo'</span>));</div></pre></td></tr></table></figure></p>
<p><strong>name复用</strong><br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">handleChange:<span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</div><div class="line">    var <span class="keyword">name</span> = event.<span class="keyword">target</span>.<span class="keyword">name</span></div><div class="line">&#125;</div><div class="line">onChange=&#123;this.handleChange&#125;</div></pre></td></tr></table></figure></p>
<p>相比Bind写法会少一些参数，在函数中需要读取表单的name值，需要添加name属性。</p>
<p><strong>实例</strong><br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyForm = React.createClass(&#123;</div><div class="line">    getInitialState:function()&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            username:<span class="string">''</span>,</div><div class="line">            gender:<span class="string">'man'</span>,</div><div class="line">            <span class="keyword">checked</span>:<span class="literal">true</span></div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    handleChange:function(<span class="keyword">event</span>)&#123;</div><div class="line">        <span class="keyword">var</span> newState=&#123;&#125;;</div><div class="line">        newState[<span class="keyword">event</span>.target.name]=<span class="keyword">event</span>.target.name==<span class="string">"checked"</span>?<span class="keyword">event</span>.target.<span class="keyword">checked</span>:<span class="keyword">event</span>.target.<span class="keyword">value</span>;</div><div class="line">        <span class="keyword">this</span>.setState(newState);</div><div class="line">    &#125;,</div><div class="line">    submitHandler:function (e) &#123;</div><div class="line">        e.preventDefault();</div><div class="line">        console.log(<span class="keyword">this</span>.state);</div><div class="line">    &#125;,</div><div class="line">    render:function () &#123;</div><div class="line">        <span class="keyword">return</span> &lt;form onSubmit=&#123;<span class="keyword">this</span>.submitHandler&#125;&gt;</div><div class="line">            &lt;label htmlFor=<span class="string">"username"</span>&gt;请输入用户名&lt;/label&gt;</div><div class="line">            &lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span> onChange=&#123;<span class="keyword">this</span>.handleChange&#125; <span class="keyword">value</span>=&#123;<span class="keyword">this</span>.state.username&#125; id=<span class="string">"username"</span>/&gt;</div><div class="line">            &lt;br/&gt;</div><div class="line">            &lt;<span class="keyword">select</span> name=<span class="string">"gender"</span> onChange=&#123;<span class="keyword">this</span>.handleChange&#125; <span class="keyword">value</span>=&#123;<span class="keyword">this</span>.state.gender&#125;&gt;</div><div class="line">                &lt;option <span class="keyword">value</span>=<span class="string">"man"</span>&gt;男&lt;/option&gt;</div><div class="line">                &lt;option <span class="keyword">value</span>=<span class="string">"woman"</span>&gt;女&lt;/option&gt;</div><div class="line">            &lt;/<span class="keyword">select</span>&gt;</div><div class="line">            &lt;br/&gt;</div><div class="line">            &lt;label htmlFor=<span class="string">"checkbox"</span>&gt;大大是帅哥吗&lt;/label&gt;</div><div class="line">            &lt;input type=<span class="string">"checkbox"</span> <span class="keyword">value</span>=<span class="string">"大大是帅哥"</span> <span class="keyword">checked</span>=&#123;<span class="keyword">this</span>.state.<span class="keyword">checked</span>&#125; onChange=&#123;<span class="keyword">this</span>.handleChange&#125; name=<span class="string">"checked"</span> id=<span class="string">"checkbox"</span>/&gt;</div><div class="line">            &lt;button type=<span class="string">"submit"</span>&gt;提交&lt;/button&gt;</div><div class="line">        &lt;/form&gt;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">ReactDOM.render(&lt;MyForm /&gt;,document.getElementById(<span class="string">'reactDemo'</span>));</div></pre></td></tr></table></figure></p>
<h2 id="自定义表单组件"><a href="#自定义表单组件" class="headerlink" title="自定义表单组件"></a>自定义表单组件</h2><p>自定义表单组件能让我们更好的使用组件，让我们更好的开发网页。</p>
<p><strong>why 自定义表单组件？</strong><br>自定义表单组件的原因：</p>
<ul>
<li>内因：表单本身具备特殊性：样式统一、信息内聚、行为固定</li>
<li>外因：本质上是组件的嵌套，组织和管理组件的一种方式</li>
</ul>
</div></article></div></section><footer><div class="paginator"><a href="/2016/10/20/react-use-dmo-refs/" class="prev">上一篇</a><a href="/2016/10/17/ES6-to-let-and-const/" class="next">下一篇</a></div><div data-thread-key="2016/10/18/react-to-biaodan/" data-title="React 笔记之 表单" data-url="http://blog.lengziyu.com/2016/10/18/react-to-biaodan/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"seansun"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2016 <a href="http://blog.lengziyu.com">lengziyu</a></p><powered>by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</powered></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>